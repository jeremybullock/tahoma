#!/bin/sh
TAHOMA2D_BASE=$(dirname "$0")/..

if [ ! -d $HOME/.config/Tahoma2D ]; then
    mkdir -p $HOME/.config/Tahoma2D
fi

if [ ! -d $HOME/.config/Tahoma2D/stuff ]; then
    cp -r $TAHOMA2D_BASE/share/tahoma2d/stuff $HOME/.config/Tahoma2D
fi

if [ ! -d $HOME/.config/Tahoma2D/stuff/projects/library ]; then
    mkdir -p $HOME/.config/Tahoma2D/stuff/projects/library
fi

if [ ! -d $HOME/.config/Tahoma2D/stuff/projects/fxs ]; then
    mkdir -p $HOME/.config/Tahoma2D/stuff/projects/fxs
fi

if [ ! -e $HOME/.config/Tahoma2D/SystemVar.ini ]; then
    cat << EOF > $HOME/.config/Tahoma2D/SystemVar.ini
[General]
TAHOMA2DROOT="$HOME/.config/Tahoma2D/stuff"
TAHOMA2DPROFILES="$HOME/.config/Tahoma2D/stuff/profiles"
TAHOMA2DCACHEROOT="$HOME/.config/Tahoma2D/stuff/cache"
TAHOMA2DCONFIG="$HOME/.config/Tahoma2D/stuff/config"
TAHOMA2DFXPRESETS="$HOME/.config/Tahoma2D/stuff/fxs"
TAHOMA2DLIBRARY="$HOME/.config/Tahoma2D/stuff/library"
TAHOMA2DPROJECTS="$HOME/.config/Tahoma2D/stuff/projects"
TAHOMA2DROOT="$HOME/.config/Tahoma2D/stuff"
TAHOMA2DSTUDIOPALETTE="$HOME/.config/Tahoma2D/stuff/studiopalette"
EOF
fi

export LD_LIBRARY_PATH=${TAHOMA2D_BASE}/lib/tahoma2d:${LD_LIBRARY_PATH}

exec $TAHOMA2D_BASE/bin/Tahoma2D "$@"
